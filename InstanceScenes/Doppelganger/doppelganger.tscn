[gd_scene load_steps=4 format=3 uid="uid://wa2hsu1c3ki3"]

[ext_resource type="Script" uid="uid://4p8qh4tqlc5q" path="res://InstanceScenes/Doppelganger/doppelganger.gd" id="1_hd476"]
[ext_resource type="PackedScene" uid="uid://jd1ioueoenj0" path="res://InstanceScenes/Doppelganger/Doppelganger.glb" id="1_ooomw"]

[sub_resource type="BoxShape3D" id="BoxShape3D_lhtsc"]

[node name="Doppelganger" type="CharacterBody3D" groups=["Enemies"]]
collision_layer = 4
collision_mask = 131
script = ExtResource("1_hd476")

[node name="DoppelgangerSkin" parent="." instance=ExtResource("1_ooomw")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.267976, -1.19209e-07, 0.126854)

[node name="Skeleton3D" parent="DoppelgangerSkin/Armature" index="0"]
bones/0/position = Vector3(0.019578783, -0.22065751, -0.31183547)
bones/0/rotation = Quaternion(-0.011915477, -4.9367234e-08, 0.0020047952, 0.999927)
bones/1/rotation = Quaternion(-0.07115718, 1.1971328e-07, -0.7849631, 0.6154427)
bones/2/rotation = Quaternion(0.09701248, 1.1775748e-08, 0.7921261, 0.6025985)
bones/3/rotation = Quaternion(0.026909884, -0.03818304, 0.014901657, 0.9987973)
bones/6/position = Vector3(-0.2380561, -1.1974971, -0.3448858)
bones/6/rotation = Quaternion(0.9952252, 0.005708097, -0.07587598, -0.06113205)
bones/7/position = Vector3(-0.23475026, -2.7712367, -0.5392069)
bones/7/rotation = Quaternion(0.67848486, 9.63321e-07, 8.897161e-07, 0.73461443)
bones/8/position = Vector3(-0.9971695, 0.68660283, -0.38083544)
bones/8/rotation = Quaternion(0.0029124867, -0.001354509, -0.3051473, 0.9522998)
bones/9/position = Vector3(-0.98383415, 0.693329, -0.38250288)
bones/10/rotation = Quaternion(0.026590966, -0.0018018724, 0.03729814, 0.99894875)
bones/12/position = Vector3(0.26610422, -1.2069244, -0.39464632)
bones/12/rotation = Quaternion(0.9952098, 0.0036377902, -0.076077335, -0.061290182)
bones/13/position = Vector3(0.26279834, -2.7806637, -0.58896756)
bones/13/rotation = Quaternion(0.67848486, 9.63321e-07, 8.897161e-07, 0.73461443)
bones/14/position = Vector3(1.0393184, 0.7303741, -0.43712768)
bones/14/rotation = Quaternion(0.012876562, -0.010421223, 0.33726275, 0.9412648)
bones/15/position = Vector3(1.0393184, 0.73037434, -0.4371277)
bones/15/rotation = Quaternion(0.9170864, 0.39608407, -0.044892784, -0.007385621)
bones/16/rotation = Quaternion(0.00763685, 0.013086175, -0.01177427, 0.9998159)

[node name="Cube" parent="DoppelgangerSkin/Armature/Skeleton3D" index="0"]
transform = Transform3D(0.2874219, 0.004668872, -0.0017572399, -0.00437138, 0.30226913, 0.01221245, 0.0017674342, -0.011657038, 0.31596723, -0.0025198273, 2.486649, -0.29187495)

[node name="AnimationPlayer" parent="DoppelgangerSkin" index="1"]
autoplay = "Idle02"

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
target_desired_distance = 8.0
avoidance_enabled = true
radius = 1.9

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(2.01605, 0, 0, 0, 5.7477, 0, 0, 0, 1.49446, -0.293017, 2.90192, 0)
shape = SubResource("BoxShape3D_lhtsc")

[node name="LifeTimer" type="Timer" parent="."]

[node name="StunTimer" type="Timer" parent="."]
wait_time = 1.5

[node name="IdleTimer" type="Timer" parent="."]

[connection signal="animation_finished" from="DoppelgangerSkin/AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
[connection signal="target_reached" from="NavigationAgent3D" to="." method="_on_navigation_agent_3d_target_reached"]
[connection signal="timeout" from="StunTimer" to="." method="_on_stun_timer_timeout"]

[editable path="DoppelgangerSkin"]
